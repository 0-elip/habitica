li.chat-message(ng-repeat='message in group.chat', ng-class=':: {highlight: isUserMentioned(user,message) || message.uuid=="system", "own-message": user._id == message.uuid}')
  .scrollable-message
    a.label.label-default.chat-message(ng-if=':: message.user', ng-class='userLevelStyleFromLevel(message.contributor.level, message.backer.npc, style)', ng-click='clickMember(message.uuid, true)')
      span(tooltip='{{::contribText(message.contributor, message.backer)}}') {{::message.user}}&nbsp;
      span(ng-class='userAdminGlyphiconStyleFromLevel(message.contributor.level)')
    | &nbsp;
    markdown(ng-model='::message.text')
    | -
    span.muted.time(from-now='::message.timestamp')
    span
      a.label.label-default(ng-show='countExists(message.likes)', ng-class='{"label-success":message.likes[user._id]}', ng-click='likeChatMessage(group,message)') +{{countExists(message.likes)}}
      a.chat-plus-one.muted(ng-show='!countExists(message.likes)', ng-click='likeChatMessage(group,message)') +1
    | &nbsp;
    a(ng-if=':: user.contributor.admin || message.uuid == user.id', ng-click='deleteChatMessage(group, message)')
      span.glyphicon.glyphicon-trash(tooltip=env.t('delete'))
